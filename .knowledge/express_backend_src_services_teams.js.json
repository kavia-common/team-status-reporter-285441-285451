{"is_source_file": true, "format": "JavaScript", "description": "This file contains service functions for managing teams and team members, including creation, retrieval, updating, archiving, and role management within a team-based access control system for a backend application.", "external_files": ["../db/pool"], "external_methods": ["pool.query", "pool.connect", "gen_random_uuid"], "published": ["listTeamsForUser", "createTeam", "getTeamById", "updateTeam", "archiveTeam", "listMembers", "addMember", "removeMember", "changeMemberRole", "listRoles", "isTeamManagerOrAdmin"], "classes": [], "methods": [{"name": "isGlobalAdminFromUser(user)", "description": "Checks if the user has a global admin role based on JWT payload.", "scope": "", "scopeKind": ""}, {"name": "listTeamsForUser(user)", "description": "Lists teams accessible to the user, with full visibility for admins.", "scope": "", "scopeKind": ""}, {"name": "createTeam({ name, description }, user)", "description": "Creates a new team; only accessible to global administrators, and automatically makes the creator a team manager.", "scope": "", "scopeKind": ""}, {"name": "getTeamById(teamId, user)", "description": "Retrieves a team by ID if the user has access (member or admin).", "scope": "", "scopeKind": ""}, {"name": "updateTeam(teamId, { name, description }, user)", "description": "Updates team details; only accessible to team managers or global admins.", "scope": "", "scopeKind": ""}, {"name": "archiveTeam(teamId, user)", "description": "Soft-deletes a team; only accessible to team managers or global admins.", "scope": "", "scopeKind": ""}, {"name": "listMembers(teamId, user)", "description": "Lists members of a team, visible to members and admins.", "scope": "", "scopeKind": ""}, {"name": "addMember(teamId, userId, role, actor)", "description": "Adds a new member to a team with a specified role; requires management rights.", "scope": "", "scopeKind": ""}, {"name": "removeMember(teamId, userId, actor)", "description": "Removes (soft delete) a member from a team; requires management rights.", "scope": "", "scopeKind": ""}, {"name": "changeMemberRole(teamId, userId, role, actor)", "description": "Changes a member's role within a team; requires management rights.", "scope": "", "scopeKind": ""}, {"name": "listRoles()", "description": "Lists available roles for team members.", "scope": "", "scopeKind": ""}, {"name": "isTeamManagerOrAdmin(userId, teamId)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["pool.query", "pool.connect", "client.query", "pool.query", "pool.query", "pool.query", "pool.query", "pool.query", "pool.query", "pool.query", "pool.query", "pool.query", "pool.query", "pool.query", "pool.query"], "search-terms": ["teams management service", "team role checks", "team creation admin-only", "team member listing", "role management", "soft delete team", "team membership", "team roles catalog"], "state": 2, "file_id": 24, "knowledge_revision": 108, "git_revision": "7e5eac64f6b0442b86dd21c37aedada2c50ea74f", "revision_history": [{"64": ""}, {"83": ""}, {"84": ""}, {"85": "dc3555abc0c89d6beb88ae2923d75f22e107d114"}, {"87": "dc3555abc0c89d6beb88ae2923d75f22e107d114"}, {"89": "dc3555abc0c89d6beb88ae2923d75f22e107d114"}, {"101": "dc3555abc0c89d6beb88ae2923d75f22e107d114"}, {"102": "dc3555abc0c89d6beb88ae2923d75f22e107d114"}, {"104": "dc3555abc0c89d6beb88ae2923d75f22e107d114"}, {"105": "dc3555abc0c89d6beb88ae2923d75f22e107d114"}, {"106": "7e5eac64f6b0442b86dd21c37aedada2c50ea74f"}, {"107": "7e5eac64f6b0442b86dd21c37aedada2c50ea74f"}, {"108": "7e5eac64f6b0442b86dd21c37aedada2c50ea74f"}], "ctags": [{"_type": "tag", "name": "addMember", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function addMember(teamId, userId, role, actor) {$/", "language": "JavaScript", "kind": "function", "signature": "(teamId, userId, role, actor)"}, {"_type": "tag", "name": "archiveTeam", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function archiveTeam(teamId, user) {$/", "language": "JavaScript", "kind": "function", "signature": "(teamId, user)"}, {"_type": "tag", "name": "changeMemberRole", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function changeMemberRole(teamId, userId, role, actor) {$/", "language": "JavaScript", "kind": "function", "signature": "(teamId, userId, role, actor)"}, {"_type": "tag", "name": "createTeam", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function createTeam({ name, description }, user) {$/", "language": "JavaScript", "kind": "function", "signature": "({ name, description }, user)"}, {"_type": "tag", "name": "getTeamById", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function getTeamById(teamId, user) {$/", "language": "JavaScript", "kind": "function", "signature": "(teamId, user)"}, {"_type": "tag", "name": "isGlobalAdminFromUser", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^function isGlobalAdminFromUser(user) {$/", "language": "JavaScript", "kind": "function", "signature": "(user)"}, {"_type": "tag", "name": "isTeamManagerOrAdmin", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function isTeamManagerOrAdmin(userId, teamId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, teamId)"}, {"_type": "tag", "name": "listMembers", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function listMembers(teamId, user) {$/", "language": "JavaScript", "kind": "function", "signature": "(teamId, user)"}, {"_type": "tag", "name": "listRoles", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function listRoles() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "listTeamsForUser", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^  listTeamsForUser,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "listTeamsForUser", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function listTeamsForUser(user) {$/", "language": "JavaScript", "kind": "function", "signature": "(user)"}, {"_type": "tag", "name": "pool", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^const pool = require('..\\/db\\/pool');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "removeMember", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function removeMember(teamId, userId, actor) {$/", "language": "JavaScript", "kind": "function", "signature": "(teamId, userId, actor)"}, {"_type": "tag", "name": "updateTeam", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function updateTeam(teamId, { name, description }, user) {$/", "language": "JavaScript", "kind": "function", "signature": "(teamId, { name, description }, user)"}], "hash": "03471f1777f26af93203dde352207143", "format-version": 4, "code-base-name": "express_backend", "filename": "express_backend/src/services/teams.js", "fields": [{"name": "listTeamsForUser,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}]}