{"is_source_file": true, "format": "JavaScript", "description": "This file implements team management and authorization logic for a backend service, including functions for team CRUD operations, member management, role assignment, and access control.", "external_files": ["../db/pool"], "external_methods": ["pool.query", "pool.connect"], "published": ["listTeamsForUser", "createTeam", "getTeamById", "updateTeam", "archiveTeam", "listMembers", "addMember", "removeMember", "changeMemberRole", "listRoles", "assignRole", "revokeRole", "isTeamManagerOrAdmin"], "classes": [], "methods": [{"name": "isTeamManagerOrAdmin(userId, teamId)", "description": "Checks if a user is a team manager, admin, or has global admin privileges.", "scope": "", "scopeKind": ""}, {"name": "listTeamsForUser(user)", "description": "Lists teams visible to a user, either all for admins or user-specific for members.", "scope": "", "scopeKind": ""}, {"name": "createTeam({ name, description }, user)", "description": "Creates a new team; only accessible by admins.", "scope": "", "scopeKind": ""}, {"name": "getTeamById(teamId, user)", "description": "Fetches team details if user has access.", "scope": "", "scopeKind": ""}, {"name": "updateTeam(teamId, { name, description }, user)", "description": "Updates team details; restricted to managers or admins.", "scope": "", "scopeKind": ""}, {"name": "archiveTeam(teamId, user)", "description": "Soft deletes (archives) a team; restricted to managers or admins.", "scope": "", "scopeKind": ""}, {"name": "listMembers(teamId, user)", "description": "Lists members of a team, visible to members and admins.", "scope": "", "scopeKind": ""}, {"name": "addMember(teamId, userId, role, actor)", "description": "Adds a new member to a team with a specific role; manager or admin only.", "scope": "", "scopeKind": ""}, {"name": "removeMember(teamId, userId, actor)", "description": "Removes (soft delete) a team member; manager or admin only.", "scope": "", "scopeKind": ""}, {"name": "changeMemberRole(teamId, userId, role, actor)", "description": "Changes a member's role; manager or admin only.", "scope": "", "scopeKind": ""}, {"name": "listRoles()", "description": "Lists all available roles.", "scope": "", "scopeKind": ""}, {"name": "assignRole(teamId, userId, roleName, actor)", "description": "Assigns a role to a user for a team; requires manager or admin privileges.", "scope": "", "scopeKind": ""}, {"name": "revokeRole(assignmentId, actor)", "description": "Revokes a role assignment by id; requires admin or relevant team manager.", "scope": "", "scopeKind": ""}], "calls": ["pool.query", "pool.connect"], "search-terms": ["teams", "team management", "role assignments", "team_members", "authorization", "permissions", "team CRUD", "member management"], "state": 2, "file_id": 24, "knowledge_revision": 107, "git_revision": "7e5eac64f6b0442b86dd21c37aedada2c50ea74f", "revision_history": [{"64": ""}, {"83": ""}, {"84": ""}, {"85": "dc3555abc0c89d6beb88ae2923d75f22e107d114"}, {"87": "dc3555abc0c89d6beb88ae2923d75f22e107d114"}, {"89": "dc3555abc0c89d6beb88ae2923d75f22e107d114"}, {"101": "dc3555abc0c89d6beb88ae2923d75f22e107d114"}, {"102": "dc3555abc0c89d6beb88ae2923d75f22e107d114"}, {"104": "dc3555abc0c89d6beb88ae2923d75f22e107d114"}, {"105": "dc3555abc0c89d6beb88ae2923d75f22e107d114"}, {"106": "7e5eac64f6b0442b86dd21c37aedada2c50ea74f"}, {"107": "7e5eac64f6b0442b86dd21c37aedada2c50ea74f"}], "ctags": [{"_type": "tag", "name": "addMember", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function addMember(teamId, userId, role, actor) {$/", "language": "JavaScript", "kind": "function", "signature": "(teamId, userId, role, actor)"}, {"_type": "tag", "name": "archiveTeam", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function archiveTeam(teamId, user) {$/", "language": "JavaScript", "kind": "function", "signature": "(teamId, user)"}, {"_type": "tag", "name": "assignRole", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function assignRole(teamId, userId, roleName, actor) {$/", "language": "JavaScript", "kind": "function", "signature": "(teamId, userId, roleName, actor)"}, {"_type": "tag", "name": "changeMemberRole", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function changeMemberRole(teamId, userId, role, actor) {$/", "language": "JavaScript", "kind": "function", "signature": "(teamId, userId, role, actor)"}, {"_type": "tag", "name": "createTeam", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function createTeam({ name, description }, user) {$/", "language": "JavaScript", "kind": "function", "signature": "({ name, description }, user)"}, {"_type": "tag", "name": "getTeamById", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function getTeamById(teamId, user) {$/", "language": "JavaScript", "kind": "function", "signature": "(teamId, user)"}, {"_type": "tag", "name": "isTeamManagerOrAdmin", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function isTeamManagerOrAdmin(userId, teamId) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, teamId)"}, {"_type": "tag", "name": "listMembers", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function listMembers(teamId, user) {$/", "language": "JavaScript", "kind": "function", "signature": "(teamId, user)"}, {"_type": "tag", "name": "listRoles", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function listRoles() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "listTeamsForUser", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^  listTeamsForUser,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "listTeamsForUser", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function listTeamsForUser(user) {$/", "language": "JavaScript", "kind": "function", "signature": "(user)"}, {"_type": "tag", "name": "pool", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^const pool = require('..\\/db\\/pool');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "removeMember", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function removeMember(teamId, userId, actor) {$/", "language": "JavaScript", "kind": "function", "signature": "(teamId, userId, actor)"}, {"_type": "tag", "name": "revokeRole", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function revokeRole(assignmentId, actor) {$/", "language": "JavaScript", "kind": "function", "signature": "(assignmentId, actor)"}, {"_type": "tag", "name": "updateTeam", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/services/teams.js", "pattern": "/^async function updateTeam(teamId, { name, description }, user) {$/", "language": "JavaScript", "kind": "function", "signature": "(teamId, { name, description }, user)"}], "hash": "f28bbb3b9c81eca2906be0777eda9677", "format-version": 4, "code-base-name": "express_backend", "filename": "express_backend/src/services/teams.js", "fields": [{"name": "listTeamsForUser,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}]}