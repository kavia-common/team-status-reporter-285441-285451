{"is_source_file": true, "format": "JavaScript", "description": "This file defines a BootstrapController class in JavaScript for use in an Express backend. It provides administrative bootstrap actions, specifically a method to grant admin rights to a user by their ID or email, guarded by environment flags. The class interacts with a PostgreSQL database via a connection pool to perform user role updates securely.", "external_files": ["../db/pool"], "external_methods": ["pool.connect()", "client.query()", "res.status()", "res.json()"], "published": ["BootstrapController"], "classes": [{"name": "BootstrapController", "description": "Controller handling bootstrap operations such as granting admin privileges to users, protected by environment variable flag."}], "methods": [{"name": "grantAdmin(req, res)", "description": "Async method that grants a user admin rights by updating their role in the database, validating environment flags, and handling various error cases.", "scope": "BootstrapController", "scopeKind": "class"}], "calls": ["pool.connect()", "client.query()", "res.status()", "res.json()", "client.query('BEGIN')", "client.query('SELECT id FROM users ...')", "client.query('INSERT INTO roles ...')", "client.query('UPDATE users ...')", "client.query('COMMIT')", "client.query('ROLLBACK')", "client.release()"], "search-terms": ["BootstrapController", "grantAdmin", "environment guard", "PostgreSQL user role update", "Express controller"], "state": 2, "file_id": 33, "knowledge_revision": 103, "git_revision": "", "revision_history": [{"93": ""}, {"103": ""}], "ctags": [{"_type": "tag", "name": "BootstrapController", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/controllers/bootstrap.js", "pattern": "/^class BootstrapController {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/controllers/bootstrap.js", "pattern": "/^module.exports = new BootstrapController();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "grantAdmin", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/controllers/bootstrap.js", "pattern": "/^  async grantAdmin(req, res) {$/", "language": "JavaScript", "kind": "method", "signature": "(req, res)", "scope": "BootstrapController", "scopeKind": "class"}, {"_type": "tag", "name": "pool", "path": "/home/kavia/workspace/code-generation/team-status-reporter-285441-285451/express_backend/src/controllers/bootstrap.js", "pattern": "/^const pool = require('..\\/db\\/pool');$/", "language": "JavaScript", "kind": "constant"}], "hash": "75ecd17767a8a8ceacb9fec354465ee2", "format-version": 4, "code-base-name": "express_backend", "filename": "express_backend/src/controllers/bootstrap.js", "fields": [{"name": "module.exports = new BootstrapController();", "scope": "module", "scopeKind": "class", "description": "unavailable"}]}